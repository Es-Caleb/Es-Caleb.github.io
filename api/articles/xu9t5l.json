{"title":"nginx配置","uid":"4298a08c1e0e68f5aeb283438517f755","slug":"xu9t5l","date":"2021-12-19T09:08:00.000Z","updated":"2023-02-16T01:24:47.531Z","comments":true,"path":"api/articles/xu9t5l.json","keywords":null,"cover":null,"content":"<h1 id=\"服务器-nginx-配置\"><a href=\"#服务器-nginx-配置\" class=\"headerlink\" title=\"服务器 nginx 配置\"></a>服务器 nginx 配置</h1><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">一般目录地址：\n/etc/nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h2 id=\"nginx-conf-配置示例\"><a href=\"#nginx-conf-配置示例\" class=\"headerlink\" title=\"nginx.conf 配置示例\"></a>nginx.conf 配置示例</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># For more information on configuration, see:</span>\n<span class=\"token comment\">#   * Official English Documentation: http://nginx.org/en/docs/</span>\n<span class=\"token comment\">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span>\n\nuser www-data<span class=\"token punctuation\">;</span>\nworker_processes auto<span class=\"token punctuation\">;</span>\nworker_rlimit_nofile <span class=\"token number\">65535</span><span class=\"token punctuation\">;</span>\nerror_log /var/log/nginx/error.log<span class=\"token punctuation\">;</span>\npid /run/nginx.pid<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span>\n<span class=\"token comment\"># include /usr/share/nginx/modules/*.conf;</span>\n\nevents <span class=\"token punctuation\">&#123;</span>\n    worker_connections <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\nhttp <span class=\"token punctuation\">&#123;</span>\n\n    include             /etc/nginx/mime.types<span class=\"token punctuation\">;</span>\n    default_type        application/octet-stream<span class=\"token punctuation\">;</span>\n\n    log_format  main  <span class=\"token string\">'$remote_addr - $remote_user [$time_local] \"$request\" '</span>\n                      <span class=\"token string\">'$status $body_bytes_sent \"$http_referer\" '</span>\n                      <span class=\"token string\">'\"$http_user_agent\" \"$http_x_forwarded_for\"'</span><span class=\"token punctuation\">;</span>\n\n    access_log  /var/log/nginx/access.log  main<span class=\"token punctuation\">;</span>\n\n    sendfile            on<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">#tcp_nopush          on;</span>\n    tcp_nodelay         on<span class=\"token punctuation\">;</span>\n    keepalive_timeout   <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n    types_hash_max_size <span class=\"token number\">2048</span><span class=\"token punctuation\">;</span>\n    client_max_body_size 100m<span class=\"token punctuation\">;</span>\n    underscores_in_headers on<span class=\"token punctuation\">;</span>\n\n    server_names_hash_max_size <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span>\n    server_names_hash_bucket_size <span class=\"token number\">64</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\"># Load modular configuration files from the /etc/nginx/conf.d directory.</span>\n    <span class=\"token comment\"># See http://nginx.org/en/docs/ngx_core_module.html#include</span>\n    <span class=\"token comment\"># for more information.</span>\n    include /etc/nginx/conf.d/*.conf<span class=\"token punctuation\">;</span>\n    include /etc/nginx/sites-enabled/*<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># Settings for a TLS enabled server.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\">#    server &#123;</span>\n<span class=\"token comment\">#        listen       443 ssl http2 default_server;</span>\n<span class=\"token comment\">#        listen       [::]:443 ssl http2 default_server;</span>\n<span class=\"token comment\">#        server_name  _;</span>\n<span class=\"token comment\">#        root         /usr/share/nginx/html;</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\">#        ssl_certificate \"/etc/pki/nginx/server.crt\";</span>\n<span class=\"token comment\">#        ssl_certificate_key \"/etc/pki/nginx/private/server.key\";</span>\n<span class=\"token comment\">#        ssl_session_cache shared:SSL:1m;</span>\n<span class=\"token comment\">#        ssl_session_timeout  10m;</span>\n<span class=\"token comment\">#        ssl_ciphers HIGH:!aNULL:!MD5;</span>\n<span class=\"token comment\">#        ssl_prefer_server_ciphers on;</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\">#        # Load configuration files for the default server block.</span>\n<span class=\"token comment\">#        include /etc/nginx/default.d/*.conf;</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\">#        location / &#123;</span>\n<span class=\"token comment\">#        &#125;</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\">#        error_page 404 /404.html;</span>\n<span class=\"token comment\">#        location = /404.html &#123;</span>\n<span class=\"token comment\">#        &#125;</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\">#        error_page 500 502 503 504 /50x.html;</span>\n<span class=\"token comment\">#        location = /50x.html &#123;</span>\n<span class=\"token comment\">#        &#125;</span>\n<span class=\"token comment\">#    &#125;</span>\n\n<span class=\"token punctuation\">&#125;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"conf-d-文件夹配置示例\"><a href=\"#conf-d-文件夹配置示例\" class=\"headerlink\" title=\"conf.d 文件夹配置示例\"></a>conf.d 文件夹配置示例</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 文件名起 xxx.conf</span>\n<span class=\"token comment\"># 配置示例</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># jenkins.conf 示例</span>\nserver <span class=\"token punctuation\">&#123;</span>\n    listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n    server_name jenkins.xxx.xxx.xxx<span class=\"token punctuation\">;</span>\n\n    access_log /etc/nginx/logs/jenkins.access.log main<span class=\"token punctuation\">;</span>\n    error_log /etc/nginx/logs/jenkins.error.log warn<span class=\"token punctuation\">;</span>\n\n    location / <span class=\"token punctuation\">&#123;</span>\n        proxy_pass http://localhost:8080<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 站点配置示例</span>\n<span class=\"token comment\"># xxx.conf</span>\nserver <span class=\"token punctuation\">&#123;</span>\n    listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n    server_name ~^<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>a-zA-Z0-9-<span class=\"token punctuation\">]</span>+<span class=\"token punctuation\">)</span><span class=\"token punctuation\">\\</span>.pda-dev<span class=\"token punctuation\">\\</span>.xxx<span class=\"token punctuation\">(</span>域名配置<span class=\"token punctuation\">)</span><span class=\"token punctuation\">\\</span>.xxx<span class=\"token punctuation\">(</span>域名配置<span class=\"token punctuation\">)</span><span class=\"token punctuation\">\\</span>.xxx<span class=\"token punctuation\">(</span>域名配置<span class=\"token punctuation\">)</span>$<span class=\"token punctuation\">;</span>\n    <span class=\"token builtin class-name\">set</span> <span class=\"token variable\">$platform</span> <span class=\"token variable\">$1</span><span class=\"token punctuation\">;</span>\n\n    charset utf-8<span class=\"token punctuation\">;</span>\n    access_log /etc/nginx/logs/pda.admin.dev.access.log main<span class=\"token punctuation\">;</span>\n    error_log /etc/nginx/logs/pda.admin.dev.error.log error<span class=\"token punctuation\">;</span>\n\n    location @rewrites <span class=\"token punctuation\">&#123;</span>\n        rewrite ^.*$ /index.html last<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    location /api <span class=\"token punctuation\">&#123;</span>\n        proxy_pass http://api.pda-dev-admin.xxx<span class=\"token punctuation\">(</span>域名配置<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    location / <span class=\"token punctuation\">&#123;</span>\n        root /mnt/data/www/frontend_deploy_workspace/dev/pda/<span class=\"token variable\">$platform</span><span class=\"token punctuation\">;</span>\n        try_files <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span>/ @rewrites<span class=\"token punctuation\">;</span>\n        index index.html<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","text":"服务器 nginx 配置一般目录地址： /etc/nginx nginx.conf 配置示例# For more information on configuration, see: # * Official English Documentation: http://nginx...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"nginx","slug":"nginx","count":1,"path":"api/categories/nginx.json"}],"tags":[{"name":"nginx","slug":"nginx","count":1,"path":"api/tags/nginx.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E5%99%A8-nginx-%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">服务器 nginx 配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#nginx-conf-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">nginx.conf 配置示例</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#conf-d-%E6%96%87%E4%BB%B6%E5%A4%B9%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">conf.d 文件夹配置示例</span></a></li></ol></li></ol>","author":{"name":"手可摘星陈","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"人就是这样，喜欢什么，败给什么","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"一名【合格】前端工程师的自检清单【自检ing】","uid":"a9932dfc783681953ee77924badfcfab","slug":"self-check-list","date":"2023-02-14T02:15:00.000Z","updated":"2023-02-16T01:23:04.481Z","comments":true,"path":"api/articles/self-check-list.json","keywords":null,"cover":[],"text":"前言感谢原作者提供这样一份优秀的自检清单，写这篇的文章的主要目的是按照清单上的知识检测自己还有哪些不足和提升，同时建立自己的知识体系原文章地址: 一名【合格】前端工程师的自检清单 一、JavaScript基础 前端工程师吃饭的家伙，深度、广度一样都不能差。 变量和类型 1.Jav...","link":"","photos":[],"count_time":{"symbolsCount":"7.1k","symbolsTime":"6 mins."},"categories":[{"name":"前端","slug":"前端","count":4,"path":"api/categories/前端.json"},{"name":"自检清单","slug":"前端/自检清单","count":4,"path":"api/categories/前端/自检清单.json"}],"tags":[{"name":"前端","slug":"前端","count":4,"path":"api/tags/前端.json"},{"name":"自检清单","slug":"自检清单","count":4,"path":"api/tags/自检清单.json"}],"author":{"name":"手可摘星陈","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"人就是这样，喜欢什么，败给什么","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"ubuntu 部署jenkins","uid":"bddf5d070a36a0f1beeaeeaa433a90bd","slug":"dhm7uz","date":"2021-12-10T03:10:00.000Z","updated":"2023-02-16T01:24:47.529Z","comments":true,"path":"api/articles/dhm7uz.json","keywords":null,"cover":[],"text":"服务器部署 jenkinsjenkinsci/blueocean 安装docker pull jenkinsci/blueocean doker 部署 jenkinsdocker run -d -u root --name jenkins -p 8080:8080 -p 5000...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"jenkins部署","slug":"jenkins部署","count":1,"path":"api/categories/jenkins部署.json"}],"tags":[{"name":"jenkins","slug":"jenkins","count":1,"path":"api/tags/jenkins.json"},{"name":"ubuntu","slug":"ubuntu","count":1,"path":"api/tags/ubuntu.json"}],"author":{"name":"手可摘星陈","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"人就是这样，喜欢什么，败给什么","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}